<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¢Œí‘œí‰ë©´ ë³´ë¬¼ì°¾ê¸°</title>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Jua', sans-serif;
            margin: 0; padding: 0;
            background-color: #f0f4f8;
            display: flex; flex-direction: column; align-items: center;
            height: 100vh;
        }

        /* ìƒë‹¨ í—¤ë” */
        header {
            background-color: #343a40; color: white; width: 100%;
            padding: 15px 0; display: flex; justify-content: center; align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); position: relative;
        }
        .home-btn {
            position: absolute; left: 20px;
            background: transparent; border: 2px solid white; color: white;
            padding: 5px 15px; border-radius: 20px; cursor: pointer; font-weight: bold; font-family: 'Jua';
        }
        .home-btn:hover { background: white; color: #333; }
        h1 { margin: 0; font-size: 1.5rem; }

        /* ë©”ì¸ ì»¨í…ì¸  */
        .container {
            display: flex; flex-direction: column; align-items: center;
            justify-content: center; flex: 1; width: 100%; padding: 20px;
        }

        /* ìº”ë²„ìŠ¤ (ì¢Œí‘œí‰ë©´) */
        .canvas-wrapper {
            background: white; border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 10px; margin-bottom: 20px;
        }
        canvas { border: 1px solid #ddd; background-color: #fff; }

        /* ì…ë ¥ ì»¨íŠ¸ë¡¤ */
        .control-panel {
            background: white; padding: 20px; border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: flex; gap: 10px; align-items: center; flex-wrap: wrap; justify-content: center;
        }
        .input-group { display: flex; align-items: center; font-size: 1.5rem; font-weight: bold; }
        input[type="number"] {
            width: 60px; height: 40px; font-size: 1.2rem; text-align: center;
            border: 2px solid #ddd; border-radius: 8px; margin: 0 5px;
            font-family: 'Jua';
        }
        input:focus { border-color: #4a69bd; outline: none; }

        .btn {
            padding: 10px 20px; font-size: 1.2rem; border: none; border-radius: 10px;
            cursor: pointer; color: white; font-family: 'Jua'; transition: transform 0.1s;
        }
        .btn:active { transform: scale(0.95); }
        .btn-check { background-color: #27ae60; }
        .btn-skip { background-color: #e67e22; }

        /* ì ìˆ˜íŒ */
        .score-board {
            margin-top: 20px; font-size: 1.2rem; color: #2c3e50;
            background: #dfe6e9; padding: 10px 20px; border-radius: 20px;
        }

        /* ê²°ê³¼ ëª¨ë‹¬ */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 1000;
        }
        .modal-content { background: white; padding: 30px; border-radius: 15px; text-align: center; width: 300px; }
        .modal-content h2 { margin-top: 0; }
        .modal-btn { background-color: #4a69bd; color: white; padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; font-family: 'Jua'; font-size: 1.2rem; }

    </style>
</head>
<body>

    <header>
        <button class="home-btn" onclick="location.href='../../index.html'">ğŸ  í™ˆ</button>
        <h1>ğŸ“ ì¢Œí‘œë¥¼ ì°¾ì•„ë¼!</h1>
    </header>

    <div class="container">
        <div class="score-board">
            ë§ì¶˜ ê°œìˆ˜: <span id="score">0</span> | ì—°ì† ì •ë‹µ: <span id="streak">0</span>
        </div>

        <div class="canvas-wrapper">
            <canvas id="graphCanvas" width="340" height="340"></canvas>
        </div>

        <div class="control-panel">
            <div class="input-group">
                ( <input type="number" id="inputX" placeholder="x"> , 
                  <input type="number" id="inputY" placeholder="y"> )
            </div>
            <button class="btn btn-check" onclick="checkAnswer()">í™•ì¸</button>
            <button class="btn btn-skip" onclick="generateProblem()">íŒ¨ìŠ¤</button>
        </div>
    </div>

    <div class="modal" id="resultModal">
        <div class="modal-content">
            <h2 id="modalTitle">ì •ë‹µ! ğŸ‰</h2>
            <p id="modalMsg">ì •í™•í•œ ì¢Œí‘œì…ë‹ˆë‹¤.</p>
            <button class="modal-btn" onclick="closeModal()">ë‹¤ìŒ ë¬¸ì œ</button>
        </div>
    </div>

<script>
    const canvas = document.getElementById('graphCanvas');
    const ctx = canvas.getContext('2d');
    
    // ì„¤ì •ê°’
    const RANGE = 10; // -10 ~ 10 ë²”ìœ„
    const GRID_SIZE = canvas.width / (RANGE * 2 + 2); // ê²©ì í•œ ì¹¸ í¬ê¸°
    const CENTER = canvas.width / 2;
    
    let targetX = 0;
    let targetY = 0;
    let score = 0;
    let streak = 0;

    // 1. ë¬¸ì œ ìƒì„±
    function generateProblem() {
        do {
            targetX = Math.floor(Math.random() * (RANGE * 2 + 1)) - RANGE;
            targetY = Math.floor(Math.random() * (RANGE * 2 + 1)) - RANGE;
        } while (targetX === 0 && targetY === 0);

        document.getElementById('inputX').value = '';
        document.getElementById('inputY').value = '';
        document.getElementById('inputX').focus();

        drawGraph();
    }

    // 2. ê·¸ë˜í”„ ê·¸ë¦¬ê¸° (ê°œì„ ë¨)
    function drawGraph() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // [ë°°ê²½ ê·¸ë¦¬ë“œ] ì—°í•˜ê²Œ
        ctx.strokeStyle = '#f0f0f0'; 
        ctx.lineWidth = 1;
        ctx.beginPath();
        for(let i = 0; i <= RANGE * 2 + 2; i++) {
            let pos = i * GRID_SIZE;
            ctx.moveTo(pos, 0); ctx.lineTo(pos, canvas.height);
            ctx.moveTo(0, pos); ctx.lineTo(canvas.width, pos);
        }
        ctx.stroke();

        // [ì¶• ê·¸ë¦¬ê¸°] ì§„í•˜ê²Œ + í™”ì‚´í‘œ
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.fillStyle = '#333'; // í™”ì‚´í‘œ ì±„ìš°ê¸° ìƒ‰
        ctx.beginPath();
        
        // xì¶• (ê°€ë¡œ)
        ctx.moveTo(0, CENTER); 
        ctx.lineTo(canvas.width, CENTER);
        // xì¶• í™”ì‚´í‘œ (ì˜¤ë¥¸ìª½ ë)
        ctx.moveTo(canvas.width, CENTER);
        ctx.lineTo(canvas.width - 10, CENTER - 5);
        ctx.lineTo(canvas.width - 10, CENTER + 5);
        ctx.fill();

        // yì¶• (ì„¸ë¡œ)
        ctx.moveTo(CENTER, 0); 
        ctx.lineTo(CENTER, canvas.height);
        // yì¶• í™”ì‚´í‘œ (ìœ„ìª½ ë)
        ctx.moveTo(CENTER, 0);
        ctx.lineTo(CENTER - 5, 10);
        ctx.lineTo(CENTER + 5, 10);
        ctx.fill();
        ctx.stroke();

        // [í…ìŠ¤íŠ¸ í‘œì‹œ] ë¡œë§ˆì, ìˆ«ì 5ë‹¨ìœ„
        ctx.fillStyle = '#333';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        
        // (1) ì›ì  O í‘œì‹œ (ìˆ«ì 0 ëŒ€ì‹  ì•ŒíŒŒë²³ O)
        ctx.font = 'italic bold 16px "Times New Roman", serif'; // ë¡œë§ˆì(ì´íƒ¤ë¦­ ì•„ë‹˜)
        ctx.fillText("O", CENTER - 12, CENTER + 12); // ì™¼ìª½ ì•„ë˜ì— ì‚´ì§

        // (2) ì¶• ì´ë¦„ (x, y) - ì´íƒ¤ë¦­ì²´
        ctx.font = 'italic bold 18px "Times New Roman", serif';
        ctx.fillText("x", canvas.width - 15, CENTER + 18);
        ctx.fillText("y", CENTER + 15, 15);

        // (3) ìˆ«ì ëˆˆê¸ˆ (5ë‹¨ìœ„) - ì •ìì²´
        ctx.font = '12px Arial';
        
        // xì¶• ëˆˆê¸ˆ (-10, -5, 5, 10)
        for (let i = -10; i <= 10; i+=5) {
            if (i === 0) continue; // 0ì€ Oë¡œ ëŒ€ì²´í–ˆìœ¼ë¯€ë¡œ ìƒëµ
            let xPos = CENTER + (i * GRID_SIZE);
            ctx.fillText(i, xPos, CENTER + 15); // ì¶• ì•„ë˜ì— í‘œì‹œ
            // ëˆˆê¸ˆì„  ì‚´ì§
            ctx.beginPath();
            ctx.moveTo(xPos, CENTER - 3);
            ctx.lineTo(xPos, CENTER + 3);
            ctx.stroke();
        }

        // yì¶• ëˆˆê¸ˆ (-10, -5, 5, 10)
        for (let i = -10; i <= 10; i+=5) {
            if (i === 0) continue;
            let yPos = CENTER - (i * GRID_SIZE);
            ctx.textAlign = 'right'; // yì¶•ì€ ìˆ«ì ì˜¤ë¥¸ìª½ ì •ë ¬
            ctx.fillText(i, CENTER - 8, yPos); // ì¶• ì™¼ìª½ì— í‘œì‹œ
            ctx.textAlign = 'center'; // ë‹¤ì‹œ ì¤‘ì•™ ì •ë ¬ë¡œ ë³µêµ¬
             // ëˆˆê¸ˆì„  ì‚´ì§
            ctx.beginPath();
            ctx.moveTo(CENTER - 3, yPos);
            ctx.lineTo(CENTER + 3, yPos);
            ctx.stroke();
        }

        // [ë¬¸ì œì˜ ì  ì°ê¸°]
        const pointPixelX = CENTER + (targetX * GRID_SIZE);
        const pointPixelY = CENTER - (targetY * GRID_SIZE);

        ctx.fillStyle = '#e74c3c'; // ë¹¨ê°„ìƒ‰
        ctx.beginPath();
        ctx.arc(pointPixelX, pointPixelY, 6, 0, Math.PI * 2);
        ctx.fill();
        // ì  í…Œë‘ë¦¬ (ê°€ì‹œì„± í™•ë³´)
        ctx.strokeStyle = 'white';
        ctx.lineWidth = 2;
        ctx.stroke();
    }

    // 3. ì •ë‹µ í™•ì¸
    function checkAnswer() {
        const userX = parseInt(document.getElementById('inputX').value);
        const userY = parseInt(document.getElementById('inputY').value);

        if (isNaN(userX) || isNaN(userY)) {
            alert("ì¢Œí‘œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
            return;
        }

        const modal = document.getElementById('resultModal');
        const title = document.getElementById('modalTitle');
        const msg = document.getElementById('modalMsg');
        const btn = document.querySelector('.modal-btn');

        if (userX === targetX && userY === targetY) {
            score++;
            streak++;
            title.innerText = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰";
            title.style.color = "#27ae60";
            msg.innerText = `ì •í™•í•´ìš”! (${targetX}, ${targetY})`;
            btn.innerText = "ë‹¤ìŒ ë¬¸ì œ";
            btn.onclick = () => { closeModal(); generateProblem(); };
        } else {
            streak = 0;
            title.innerText = "í‹€ë ¸ìŠµë‹ˆë‹¤ ğŸ˜¢";
            title.style.color = "#c0392b";
            msg.innerText = "ë‹¤ì‹œ í•œë²ˆ ê·¸ë˜í”„ë¥¼ ì˜ ì‚´í´ë³´ì„¸ìš”.";
            btn.innerText = "ë‹¤ì‹œ ì‹œë„";
            btn.onclick = () => { closeModal(); };
        }

        updateScore();
        modal.style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('resultModal').style.display = 'none';
        if(document.querySelector('.modal-btn').innerText === "ë‹¤ìŒ ë¬¸ì œ") {
             document.getElementById('inputX').focus();
        }
    }

    function updateScore() {
        document.getElementById('score').innerText = score;
        document.getElementById('streak').innerText = streak;
    }

    document.getElementById('inputY').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') checkAnswer();
    });

    generateProblem();

</script>

</body>
</html>
