<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³¨ë“œë°”íì˜ íŒŒí‹°ì…˜ | Goldbach's Partition</title>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <style>
        /* 1. í…Œë§ˆ: ì‹ ë¹„ë¡œìš´ ìš°ì£¼ì™€ í™©ê¸ˆ */
        body {
            font-family: 'Jua', sans-serif;
            margin: 0; padding: 0;
            background: radial-gradient(circle at center, #2c3e50 0%, #000000 100%);
            color: #ecf0f1;
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; user-select: none;
        }

        /* 2. í—¤ë” */
        header {
            width: 100%; padding: 15px 0;
            display: flex; justify-content: center; align-items: center;
            background: rgba(255,255,255,0.05);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            position: relative;
        }
        .home-btn {
            position: absolute; left: 20px;
            background: transparent; border: 2px solid #f1c40f; color: #f1c40f;
            padding: 5px 15px; border-radius: 20px; cursor: pointer; text-decoration: none;
            transition: 0.3s;
        }
        .home-btn:hover { background: #f1c40f; color: #000; }
        h1 { margin: 0; font-size: 2rem; color: #f1c40f; text-shadow: 0 0 10px rgba(241, 196, 15, 0.5); }

        /* 3. ë©”ë‰´ í™”ë©´ */
        #menuScreen {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 80vh; width: 100%; text-align: center;
        }
        .mode-btn {
            width: 300px; padding: 20px; margin: 15px;
            font-size: 1.5rem; border: none; border-radius: 50px; cursor: pointer;
            font-family: 'Jua'; transition: transform 0.2s, box-shadow 0.2s;
            color: white; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .mode-btn:hover { transform: scale(1.05); }
        .btn-tuto { background: linear-gradient(45deg, #1abc9c, #16a085); }
        .btn-prac { background: linear-gradient(45deg, #3498db, #2980b9); }
        .btn-chall { background: linear-gradient(45deg, #e74c3c, #c0392b); }

        /* 4. ê²Œì„ í™”ë©´ */
        #gameScreen {
            display: none; flex-direction: column; align-items: center;
            width: 90%; max-width: 600px; margin-top: 30px;
        }
        
        /* íƒ€ê²Ÿ ìˆ«ì í‘œì‹œ (ë ˆì´ì•„ì›ƒ ê°œì„ ) */
        .target-box {
            display: flex; flex-direction: column; align-items: center;
            margin-bottom: 40px;
        }
        .target-label { 
            font-size: 1.2rem; color: #bdc3c7; margin-bottom: 5px; 
            letter-spacing: 2px;
        }
        .target-display {
            font-size: 4rem; color: #fff; line-height: 1;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        /* ìˆ«ì ë¶„í•´ ì˜ì—­ */
        .partition-container {
            width: 100%; padding: 20px; background: rgba(255,255,255,0.1);
            border-radius: 20px; margin-bottom: 30px;
            display: flex; flex-direction: column; align-items: center;
        }

        /* ìˆ«ì ë°•ìŠ¤ */
        .numbers-row {
            display: flex; justify-content: space-between; width: 100%; margin-bottom: 20px;
        }
        .num-box {
            width: 45%; height: 110px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            border-radius: 15px; background: #34495e; color: #7f8c8d;
            transition: 0.3s; border: 4px solid transparent;
            position: relative;
        }
        .num-label { 
            font-size: 1rem; margin-bottom: 5px; position: absolute; top: 10px; 
        }
        
        /* ì…ë ¥ì°½ ìŠ¤íƒ€ì¼ (ìˆ«ì ë¶€ë¶„) */
        .num-input {
            background: transparent; border: none; color: inherit;
            font-size: 2.5rem; width: 100%; text-align: center;
            font-family: 'Jua'; outline: none; margin-top: 15px;
        }
        /* ì…ë ¥ì°½ í™”ì‚´í‘œ ì œê±° */
        .num-input::-webkit-outer-spin-button,
        .num-input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }

        /* ì†Œìˆ˜ì¼ ë•Œ ìŠ¤íƒ€ì¼ ë³€ê²½ */
        .is-prime {
            background: #f1c40f !important; color: #2c3e50 !important;
            box-shadow: 0 0 20px #f1c40f; transform: scale(1.05);
            border-color: #fff;
        }

        /* ìŠ¬ë¼ì´ë” ì˜ì—­ (íŠœí† ë¦¬ì–¼ìš©) */
        .slider-wrapper { width: 100%; text-align: center; }
        input[type=range] {
            width: 100%; -webkit-appearance: none; background: transparent; cursor: pointer;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 10px; background: #95a5a6; border-radius: 5px;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 30px; width: 30px; border-radius: 50%;
            background: #ecf0f1; margin-top: -10px; box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        /* 5. ë²„íŠ¼ ë° í”¼ë“œë°± */
        .check-btn {
            padding: 15px 40px; font-size: 1.5rem; border-radius: 30px; border: none;
            background: #9b59b6; color: white; cursor: pointer; font-family: 'Jua';
            box-shadow: 0 5px 0 #8e44ad; transition: 0.1s;
        }
        .check-btn:active { transform: translateY(5px); box-shadow: none; }
        
        .feedback-msg {
            height: 30px; margin-top: 20px; font-size: 1.2rem; color: #e74c3c;
        }

        /* ê°œë… ë…¸íŠ¸ */
        .concept-box {
            margin-top: 50px; background: rgba(255,255,255,0.1); padding: 20px;
            border-radius: 15px; max-width: 600px; width: 90%; font-size: 0.95rem; line-height: 1.6;
        }
        .concept-title { color: #f1c40f; margin-bottom: 10px; font-size: 1.2rem; }

        /* ëª¨ë‹¬ */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); justify-content: center; align-items: center; z-index: 100;
        }
        .modal-content {
            background: white; color: #333; padding: 30px; border-radius: 20px;
            text-align: center; width: 300px; animation: popIn 0.3s; border: 5px solid #f1c40f;
        }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

    </style>
</head>
<body>

    <header>
        <a href="../../index.html" class="home-btn">ğŸ  í™ˆ</a>
        <h1>ğŸŒŒ ê³¨ë“œë°”íì˜ íŒŒí‹°ì…˜</h1>
    </header>

    <div id="menuScreen">
        <p style="font-size: 1.2rem; margin-bottom: 30px; opacity: 0.8;">
            "2ë³´ë‹¤ í° ëª¨ë“  ì§ìˆ˜ëŠ”<br>ë‘ ì†Œìˆ˜(Prime Number)ì˜ í•©ìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤."
        </p>
        <button class="mode-btn btn-tuto" onclick="startGame('tutorial')">ğŸ£ íŠœí† ë¦¬ì–¼ (ìŠ¬ë¼ì´ë”)</button>
        <button class="mode-btn btn-prac" onclick="startGame('practice')">ğŸ« ê¸°ë³¸ ëª¨ë“œ (ì§ì ‘ ì…ë ¥)</button>
        <button class="mode-btn btn-chall" onclick="startGame('challenge')">ğŸ”¥ ì±Œë¦°ì§€ (ì§ì ‘ ì…ë ¥)</button>
    </div>

    <div id="gameScreen">
        <div class="target-box">
            <div class="target-label">TARGET NUMBER</div>
            <div class="target-display" id="targetNum">--</div>
        </div>

        <div class="partition-container">
            <div class="numbers-row">
                <div class="num-box" id="boxA">
                    <div class="num-label">ì²« ë²ˆì§¸ ìˆ˜</div>
                    <input type="number" id="inputA" class="num-input" value="0">
                </div>
                <div style="display:flex; align-items:center; font-size:2rem;">+</div>
                <div class="num-box" id="boxB">
                    <div class="num-label">ë‘ ë²ˆì§¸ ìˆ˜</div>
                    <input type="number" id="inputB" class="num-input" value="0">
                </div>
            </div>

            <div class="slider-wrapper" id="sliderWrapper">
                <input type="range" id="splitSlider" min="0" max="100" value="50">
                <p style="margin-top: 10px; opacity: 0.6; font-size: 0.9rem;">ìŠ¬ë¼ì´ë”ë¥¼ ì›€ì§ì—¬ ìˆ«ìë¥¼ ìª¼ê°œë³´ì„¸ìš”!</p>
            </div>
            
            <p id="inputHint" style="display:none; opacity:0.6; font-size:0.9rem;">
                ìˆ«ì ë°•ìŠ¤ë¥¼ í´ë¦­í•˜ì—¬ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”.
            </p>
        </div>

        <button class="check-btn" onclick="checkAnswer()">í™•ì¸ (Check)</button>
        <div class="feedback-msg" id="feedback"></div>

        <button onclick="showMenu()" style="margin-top:30px; background:none; border:1px solid #aaa; color:#aaa; padding:5px 15px; border-radius:15px; cursor:pointer;">ë©”ë‰´ë¡œ ë‚˜ê°€ê¸°</button>
    </div>

    <div class="concept-box">
        <div class="concept-title">ğŸ“˜ ê³¨ë“œë°”íì˜ ì¶”ì¸¡ì´ë€?</div>
        1742ë…„ ìˆ˜í•™ì í¬ë¦¬ìŠ¤í‹°ì•ˆ ê³¨ë“œë°”íê°€ ì œì•ˆí•œ ì¶”ì¸¡ì…ë‹ˆë‹¤.<br>
        <b>"2ë³´ë‹¤ í° ëª¨ë“  ì§ìˆ˜ëŠ” ë‘ ì†Œìˆ˜ì˜ í•©ìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤."</b><br>
        ì•„ì§ê¹Œì§€ ì¦ëª…ë˜ì§€ë„, ë°˜ë¡€ê°€ ë‚˜ì˜¤ì§€ë„ ì•Šì€ ìˆ˜í•™ê³„ì˜ ìœ ëª…í•œ ë‚œì œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ ì§ì ‘ ìˆ˜ë¥¼ ìª¼ê°œë©° í™•ì¸í•´ë³´ì„¸ìš”!
    </div>

    <div class="modal" id="resultModal">
        <div class="modal-content">
            <h2 style="color:#f1c40f; margin:0;">ì„±ê³µ! ğŸ‰</h2>
            <p id="modalMsg" style="font-size:1.2rem; margin: 20px 0;">ì™„ë²½í•œ ì¡°í•©ì…ë‹ˆë‹¤!</p>
            <button onclick="nextProblem()" style="background:#2ecc71; color:white; border:none; padding:10px 30px; border-radius:20px; font-size:1.2rem; cursor:pointer; font-family:'Jua';">ë‹¤ìŒ ë¬¸ì œ ğŸ‘‰</button>
        </div>
    </div>

<script>
    let currentMode = 'tutorial';
    let targetNumber = 0;
    let numA = 0;
    let numB = 0;

    const menuScreen = document.getElementById('menuScreen');
    const gameScreen = document.getElementById('gameScreen');
    const targetDisplay = document.getElementById('targetNum');
    const slider = document.getElementById('splitSlider');
    const sliderWrapper = document.getElementById('sliderWrapper');
    const inputHint = document.getElementById('inputHint');
    
    // ì´ì œ spanì´ ì•„ë‹ˆë¼ input ìš”ì†Œì…ë‹ˆë‹¤.
    const inputA = document.getElementById('inputA');
    const inputB = document.getElementById('inputB');
    
    const boxA = document.getElementById('boxA');
    const boxB = document.getElementById('boxB');
    const feedback = document.getElementById('feedback');
    const modal = document.getElementById('resultModal');

    // ì†Œìˆ˜ íŒë³„ í•¨ìˆ˜
    function isPrime(num) {
        if (num <= 1) return false;
        if (num === 2) return true;
        if (num % 2 === 0) return false;
        const sqrt = Math.sqrt(num);
        for (let i = 3; i <= sqrt; i += 2) {
            if (num % i === 0) return false;
        }
        return true;
    }

    function showMenu() {
        menuScreen.style.display = 'flex';
        gameScreen.style.display = 'none';
    }

    function startGame(mode) {
        currentMode = mode;
        menuScreen.style.display = 'none';
        gameScreen.style.display = 'flex';
        
        // ëª¨ë“œì— ë”°ë¥¸ UI ì„¤ì •
        if (mode === 'tutorial') {
            sliderWrapper.style.display = 'block';
            inputHint.style.display = 'none';
            // íŠœí† ë¦¬ì–¼ì€ ì…ë ¥ì°½ ìˆ˜ì • ë¶ˆê°€ (ìŠ¬ë¼ì´ë” ì „ìš©)
            inputA.readOnly = true;
            inputB.readOnly = true;
            inputA.style.pointerEvents = 'none'; // í´ë¦­ ë°©ì§€
            inputB.style.pointerEvents = 'none';
        } else {
            sliderWrapper.style.display = 'none';
            inputHint.style.display = 'block';
            // ê¸°ë³¸/ì±Œë¦°ì§€ëŠ” ì…ë ¥ ê°€ëŠ¥
            inputA.readOnly = false;
            inputB.readOnly = false;
            inputA.style.pointerEvents = 'auto';
            inputB.style.pointerEvents = 'auto';
        }

        nextProblem();
    }

    function nextProblem() {
        modal.style.display = 'none';
        feedback.innerText = "";
        
        let min, max;
        if (currentMode === 'tutorial') { min = 6; max = 30; } 
        else if (currentMode === 'practice') { min = 32; max = 100; } 
        else { min = 102; max = 300; } 

        let rand = Math.floor(Math.random() * (max - min + 1)) + min;
        if (rand % 2 !== 0) rand += 1;
        targetNumber = rand;

        targetDisplay.innerText = targetNumber;

        // ì´ˆê¸°ê°’ ì„¤ì •
        if (currentMode === 'tutorial') {
            slider.min = 2;
            slider.max = targetNumber - 2;
            slider.value = Math.floor(targetNumber / 2);
            updateFromSlider();
        } else {
            // ì§ì ‘ ì…ë ¥ ëª¨ë“œëŠ” ë¹„ì›Œë‘ê¸° (0ìœ¼ë¡œ ì´ˆê¸°í™”)
            numA = 0; numB = 0;
            inputA.value = '';
            inputB.value = '';
            resetBoxStyle();
        }
    }

    // 1. ìŠ¬ë¼ì´ë” ì¡°ì‘ (íŠœí† ë¦¬ì–¼ìš©)
    slider.addEventListener('input', updateFromSlider);

    function updateFromSlider() {
        numA = parseInt(slider.value);
        numB = targetNumber - numA;
        updateDisplay();
    }

    // 2. ì§ì ‘ ì…ë ¥ ì¡°ì‘ (ê¸°ë³¸/ì±Œë¦°ì§€ìš©)
    // Aë¥¼ ì…ë ¥í•˜ë©´ Bê°€ ìë™ ê³„ì‚°ë˜ê²Œ í• ì§€, ë‘˜ ë‹¤ ì…ë ¥í•˜ê²Œ í• ì§€?
    // -> í¸ì˜ì„±ì„ ìœ„í•´ í•˜ë‚˜ ì…ë ¥í•˜ë©´ ë‚˜ë¨¸ì§€ëŠ” ìë™ ê³„ì‚° (ê³¨ë“œë°”íëŠ” 'ì¡°í•©'ì„ ì°¾ëŠ” ê²ƒì´ë¯€ë¡œ)
    inputA.addEventListener('input', () => {
        if(inputA.value === '') return;
        numA = parseInt(inputA.value);
        numB = targetNumber - numA;
        updateDisplay();
    });

    inputB.addEventListener('input', () => {
        if(inputB.value === '') return;
        numB = parseInt(inputB.value);
        numA = targetNumber - numB;
        updateDisplay();
    });

    function updateDisplay() {
        inputA.value = numA;
        inputB.value = numB;

        // ì‹œê°ì  í”¼ë“œë°±
        updateBoxStyle(boxA, numA);
        updateBoxStyle(boxB, numB);
    }

    function updateBoxStyle(box, num) {
        if (isPrime(num)) {
            box.classList.add('is-prime');
            // [ìˆ˜ì •] í…ìŠ¤íŠ¸ ê°„ì†Œí™”
            box.querySelector('.num-label').innerText = "ì†Œìˆ˜(Prime)";
        } else {
            box.classList.remove('is-prime');
            // ìˆ«ìê°€ 0ì´ë‚˜ ìŒìˆ˜ë©´ ë¼ë²¨ ìœ ì§€, ì•„ë‹ˆë©´ í•©ì„±ìˆ˜
            if(num > 1) box.querySelector('.num-label').innerText = "í•©ì„±ìˆ˜";
            else box.querySelector('.num-label').innerText = (box.id === 'boxA' ? "ì²« ë²ˆì§¸ ìˆ˜" : "ë‘ ë²ˆì§¸ ìˆ˜");
        }
    }
    
    function resetBoxStyle() {
        boxA.classList.remove('is-prime');
        boxB.classList.remove('is-prime');
        boxA.querySelector('.num-label').innerText = "ì²« ë²ˆì§¸ ìˆ˜";
        boxB.querySelector('.num-label').innerText = "ë‘ ë²ˆì§¸ ìˆ˜";
    }

    function checkAnswer() {
        // ë¹ˆì¹¸ ì²˜ë¦¬
        if (inputA.value === '' || inputB.value === '') {
            feedback.innerText = "ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.";
            return;
        }

        const primeA = isPrime(numA);
        const primeB = isPrime(numB);
        const sum = numA + numB;

        // í•©ì´ ë§ëŠ”ì§€ ìš°ì„  í™•ì¸ (ì§ì ‘ ì…ë ¥ ëª¨ë“œì—ì„œ ì˜¤íƒ€ ê°€ëŠ¥ì„±)
        if (sum !== targetNumber) {
             feedback.innerText = `í•©ì´ ${targetNumber}ê°€ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.`;
             gameScreen.classList.add('shake');
             setTimeout(() => gameScreen.classList.remove('shake'), 500);
             return;
        }

        if (primeA && primeB) {
            document.getElementById('modalMsg').innerHTML = 
                `${targetNumber} = ${numA} + ${numB}<br>ê³¨ë“œë°”íì˜ ì¶”ì¸¡ í™•ì¸ ì™„ë£Œ!`;
            modal.style.display = 'flex';
        } else {
            if (!primeA && !primeB) feedback.innerText = "ë‘˜ ë‹¤ ì†Œìˆ˜ê°€ ì•„ë‹™ë‹ˆë‹¤.";
            else if (!primeA) feedback.innerText = `ì²« ë²ˆì§¸ ìˆ˜(${numA})ê°€ ì†Œìˆ˜ê°€ ì•„ë‹™ë‹ˆë‹¤.`;
            else feedback.innerText = `ë‘ ë²ˆì§¸ ìˆ˜(${numB})ê°€ ì†Œìˆ˜ê°€ ì•„ë‹™ë‹ˆë‹¤.`;
            
            gameScreen.classList.add('shake');
            setTimeout(() => gameScreen.classList.remove('shake'), 500);
        }
    }

    // í”ë“¤ë¦¼ ì• ë‹ˆë©”ì´ì…˜
    const styleSheet = document.createElement("style");
    styleSheet.innerText = `
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        .shake { animation: shake 0.3s; }
    `;
    document.head.appendChild(styleSheet);

</script>
</body>
</html>
