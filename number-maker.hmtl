<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ˜ì‹ì˜ ì—°ê¸ˆìˆ ì‚¬ | Number Alchemist</title>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <style>
        /* 1. ê³µí†µ ì„¤ì • */
        body {
            font-family: 'Jua', sans-serif;
            margin: 0; padding: 0;
            background: radial-gradient(circle at 50% 30%, #2c3e50, #000000); /* ì–´ë‘ìš´ ì—°ê¸ˆìˆ  í…Œë§ˆ */
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; user-select: none; color: white;
        }

        /* 2. í—¤ë” */
        header {
            background: rgba(255, 255, 255, 0.1);
            width: 100%; padding: 15px 0;
            display: flex; justify-content: center; align-items: center;
            backdrop-filter: blur(10px); position: relative;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        .home-btn {
            position: absolute; left: 20px;
            background: transparent; border: 2px solid white; color: white;
            padding: 5px 15px; border-radius: 20px; cursor: pointer; 
            font-family: 'Jua'; text-decoration: none; font-size: 1rem;
            transition: 0.3s;
        }
        .home-btn:hover { background: white; color: #2c3e50; }
        h1 { margin: 0; font-size: 1.8rem; color: #f1c40f; text-shadow: 0 0 10px #f39c12; }

        /* 3. ê²Œì„ ì˜ì—­ */
        .container {
            display: flex; flex-direction: column; align-items: center;
            width: 100%; max-width: 500px; padding: 20px; box-sizing: border-box;
        }

        /* ë‚œì´ë„ ì„ íƒ */
        .level-selector {
            display: flex; gap: 10px; margin-bottom: 20px;
        }
        .level-btn {
            background: rgba(255,255,255,0.1); border: 2px solid #bdc3c7; color: #bdc3c7;
            padding: 8px 15px; border-radius: 15px; cursor: pointer; font-family: 'Jua';
        }
        .level-btn.active {
            background: #f1c40f; color: #2c3e50; border-color: #f1c40f; font-weight: bold;
            box-shadow: 0 0 15px rgba(241, 196, 15, 0.5);
        }

        /* ë¬¸ì œ í‘œì‹œíŒ */
        .quest-board {
            background: rgba(0,0,0,0.6); border: 2px solid #f1c40f;
            border-radius: 20px; padding: 20px; width: 100%; text-align: center;
            margin-bottom: 20px; box-shadow: 0 0 20px rgba(241, 196, 15, 0.2);
        }
        .quest-title { font-size: 1.2rem; color: #bdc3c7; margin-bottom: 10px; }
        .target-number { font-size: 4rem; color: #fff; text-shadow: 0 0 15px white; margin: 10px 0; }
        .quest-rule { font-size: 1.3rem; color: #f39c12; }
        .highlight { color: #e74c3c; font-size: 1.5rem; margin: 0 5px; }

        /* ì…ë ¥ í™”ë©´ */
        .input-display {
            width: 100%; height: 60px; background: white; border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            font-size: 2rem; color: #333; margin-bottom: 20px;
            overflow-x: auto; white-space: nowrap; padding: 0 10px;
            border: 4px solid #34495e;
        }

        /* í‚¤íŒ¨ë“œ */
        .keypad {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; width: 100%;
        }
        .key-btn {
            background: #34495e; color: white; border: none; border-radius: 10px;
            height: 55px; font-size: 1.4rem; cursor: pointer; font-family: 'Jua';
            box-shadow: 0 4px 0 #2c3e50; active: translateY(4px);
            transition: 0.1s;
        }
        .key-btn:active { transform: translateY(4px); box-shadow: none; }
        
        /* ë²„íŠ¼ ìƒ‰ìƒ êµ¬ë¶„ */
        .btn-num { background: #e67e22; box-shadow: 0 4px 0 #d35400; font-size: 1.8rem; } /* ìˆ«ì */
        .btn-op { background: #3498db; box-shadow: 0 4px 0 #2980b9; } /* ì—°ì‚°ì */
        .btn-action { background: #95a5a6; box-shadow: 0 4px 0 #7f8c8d; } /* ì§€ìš°ê¸° */
        .btn-submit { 
            grid-column: span 2; background: #2ecc71; box-shadow: 0 4px 0 #27ae60; 
            font-size: 1.5rem;
        }

        /* ëª¨ë‹¬ */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); justify-content: center; align-items: center; z-index: 1000;
        }
        .modal-content { 
            background: white; padding: 30px; border-radius: 25px; 
            text-align: center; width: 320px; color: #333;
            box-shadow: 0 0 30px rgba(255,255,255,0.5); border: 4px solid #f1c40f;
            animation: popIn 0.3s;
        }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .modal-btn { 
            background-color: #2c3e50; color: white; padding: 10px 25px; 
            border: none; border-radius: 20px; cursor: pointer; 
            font-family: 'Jua'; font-size: 1.2rem; margin-top: 15px;
        }

        /* 4. ì ‘ì´ì‹ ê°œë…ë…¸íŠ¸ */
        .concept-wrapper { width: 100%; max-width: 500px; margin: 30px auto; padding: 0 20px; box-sizing: border-box;}
        .concept-btn {
            width: 100%; padding: 15px 25px; background: white; border: none; border-radius: 20px;
            color: #2d3436; font-family: 'Jua'; font-size: 1.2rem; cursor: pointer; text-align: left;
            display: flex; justify-content: space-between; align-items: center;
        }
        .concept-content {
            max-height: 0; overflow: hidden; background: rgba(255, 255, 255, 0.9);
            border-radius: 0 0 20px 20px; transition: max-height 0.3s ease-out; color: #333;
        }
        .concept-inner { padding: 25px; line-height: 1.6; }

    </style>
</head>
<body>

    <header>
        <a href="../../index.html" class="home-btn">ğŸ  í™ˆ</a>
        <h1>âš—ï¸ ìˆ˜ì‹ì˜ ì—°ê¸ˆìˆ ì‚¬</h1>
    </header>

    <div class="container">
        <div class="level-selector">
            <button class="level-btn active" onclick="setLevel(1)">ì´ˆê¸‰</button>
            <button class="level-btn" onclick="setLevel(2)">ì¤‘ê¸‰</button>
            <button class="level-btn" onclick="setLevel(3)">ê³ ê¸‰</button>
        </div>

        <div class="quest-board">
            <div class="quest-title">ëª©í‘œ ìˆ«ìë¥¼ ë§Œë“œì„¸ìš”!</div>
            <div class="target-number" id="targetNum">?</div>
            <div class="quest-rule">
                ìˆ«ì <span class="highlight" id="baseNum">5</span>ë¥¼<br>
                ì •í™•íˆ <span class="highlight" id="reqCount">3</span>ë²ˆ ì‚¬ìš©í•˜ì„¸ìš”.
            </div>
        </div>

        <div class="input-display" id="inputDisplay"></div>

        <div class="keypad" id="keypad">
            </div>
    </div>

    <div class="concept-wrapper">
        <button class="concept-btn" onclick="toggleConcept()">
            <span>ğŸ“˜ ì—°ê¸ˆìˆ  ê°€ì´ë“œ (ê·œì¹™)</span> <span>â–¼</span>
        </button>
        <div class="concept-content" id="conceptBox">
            <div class="concept-inner">
                <h3>1. ê²Œì„ ê·œì¹™</h3>
                <ul>
                    <li>ì œì‹œëœ ìˆ«ìë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                    <li>ì œì‹œëœ íšŸìˆ˜ë§Œí¼ ì •í™•íˆ ì¨ì•¼ í•©ë‹ˆë‹¤.</li>
                    <li><b>55</b> ì²˜ëŸ¼ ë¶™ì—¬ ì“°ë©´ 2ê°œë¥¼ ì“´ ê²ƒìœ¼ë¡œ ì¹©ë‹ˆë‹¤.</li>
                </ul>
                <h3>2. ì—°ì‚° ê¸°í˜¸</h3>
                <ul>
                    <li><b>^</b> : ê±°ë“­ì œê³± (ì˜ˆ: 2^3 = 8)</li>
                    <li><b>âˆš</b> : ì œê³±ê·¼ (ì˜ˆ: âˆš4 = 2)</li>
                    <li><b>!</b> : íŒ©í† ë¦¬ì–¼ (ì˜ˆ: 3! = 3Ã—2Ã—1 = 6)</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="modal" id="resultModal">
        <div class="modal-content">
            <h2 id="modalTitle">ì„±ê³µ! ğŸ‰</h2>
            <p id="modalMsg">ì™„ë²½í•œ ì—°ê¸ˆìˆ ì…ë‹ˆë‹¤!</p>
            <button class="modal-btn" onclick="nextProblem()">ë‹¤ìŒ ë¬¸ì œ ğŸ‘‰</button>
        </div>
    </div>

<script>
    let currentLevel = 1;
    let baseNumber = 0;
    let requiredCount = 0;
    let targetNumber = 0;
    let currentExpression = "";

    // íŒ©í† ë¦¬ì–¼ í•¨ìˆ˜ êµ¬í˜„
    function factorial(n) {
        if (n < 0) return NaN;
        if (n === 0 || n === 1) return 1;
        let result = 1;
        for(let i = 2; i <= n; i++) result *= i;
        return result;
    }

    // ì´ˆê¸°í™”
    function init() {
        renderKeypad();
        generateProblem();
    }

    function setLevel(lv) {
        currentLevel = lv;
        document.querySelectorAll('.level-btn').forEach((btn, idx) => {
            btn.classList.toggle('active', idx + 1 === lv);
        });
        renderKeypad();
        generateProblem();
    }

    function renderKeypad() {
        const keypad = document.getElementById('keypad');
        keypad.innerHTML = '';

        // ê¸°ë³¸ ì—°ì‚°ì
        const basics = ['(', ')', '/', '*', '-', '+'];
        
        // ìˆ«ì ë²„íŠ¼ (í˜„ì¬ ë² ì´ìŠ¤ ë„˜ë²„)
        const numBtn = `<button class="key-btn btn-num" onclick="addInput('${baseNumber}')">${baseNumber}</button>`;
        
        // ë ˆë²¨ë³„ ì¶”ê°€ ë²„íŠ¼
        let extras = [];
        if (currentLevel >= 2) extras.push('^');
        if (currentLevel >= 3) {
            extras.push('âˆš');
            extras.push('!');
        }

        // ë°°ì¹˜ ë¡œì§
        // 1. ìˆ«ì ë²„íŠ¼ì€ í•­ìƒ ì˜ ë³´ì´ëŠ” ê³³ì—
        // 2. ë‚˜ë¨¸ì§€ëŠ” ê·¸ë¦¬ë“œì— ë°°ì¹˜
        
        // ì²« ì¤„: ì´ˆê¸°í™”, ê´„í˜¸, ë‚˜ëˆ„ê¸°
        keypad.innerHTML += `<button class="key-btn btn-action" onclick="clearInput()">C</button>`;
        keypad.innerHTML += `<button class="key-btn btn-op" onclick="addInput('(')">(</button>`;
        keypad.innerHTML += `<button class="key-btn btn-op" onclick="addInput(')')">)</button>`;
        keypad.innerHTML += `<button class="key-btn btn-op" onclick="addInput('/')">Ã·</button>`;

        // ë‘˜ì§¸ ì¤„: 7 8 9 ê³±í•˜ê¸° (ì—¬ê¸°ì„œëŠ” ìˆ«ìí‚¤ê°€ í•˜ë‚˜ë¿ì´ë¯€ë¡œ êµ¬ì¡° ë³€ê²½)
        // [ìˆ«ì] [^] [!] [*]
        keypad.innerHTML += numBtn; // ë©”ì¸ ìˆ«ì
        
        if(currentLevel >= 2) keypad.innerHTML += `<button class="key-btn btn-op" onclick="addInput('^')">^</button>`;
        else keypad.innerHTML += `<button class="key-btn btn-op" style="opacity:0.3; cursor:default;"> </button>`; // ë¹ˆì¹¸

        if(currentLevel >= 3) keypad.innerHTML += `<button class="key-btn btn-op" onclick="addInput('!')">!</button>`;
        else keypad.innerHTML += `<button class="key-btn btn-op" style="opacity:0.3; cursor:default;"> </button>`; // ë¹ˆì¹¸

        keypad.innerHTML += `<button class="key-btn btn-op" onclick="addInput('*')">Ã—</button>`;

        // ì…‹ì§¸ ì¤„: [ë£¨íŠ¸] [ë°±ìŠ¤í˜ì´ìŠ¤] [+] [-]
        if(currentLevel >= 3) keypad.innerHTML += `<button class="key-btn btn-op" onclick="addInput('âˆš')">âˆš</button>`;
        else keypad.innerHTML += `<button class="key-btn btn-op" style="opacity:0.3; cursor:default;"> </button>`;

        keypad.innerHTML += `<button class="key-btn btn-action" onclick="backspace()">âŒ«</button>`;
        keypad.innerHTML += `<button class="key-btn btn-op" onclick="addInput('+')">+</button>`;
        keypad.innerHTML += `<button class="key-btn btn-op" onclick="addInput('-')">-</button>`;

        // ë„·ì§¸ ì¤„: ì œì¶œ (í¬ê²Œ)
        keypad.innerHTML += `<button class="key-btn btn-submit" style="grid-column: span 4;" onclick="checkAnswer()">ì—°ì„±í•˜ê¸° (ì •ë‹µí™•ì¸)</button>`;
    }

    // [í•µì‹¬] í’€ ìˆ˜ ìˆëŠ” ë¬¸ì œ ìƒì„±ê¸°
    function generateProblem() {
        // 1. ì‚¬ìš©í•  ìˆ«ì(1~9)ì™€ ê°œìˆ˜(3~5) ëœë¤ ì„ íƒ
        baseNumber = Math.floor(Math.random() * 9) + 1; 
        requiredCount = Math.floor(Math.random() * 3) + 3; // 3, 4, 5ê°œ

        // 2. í‚¤íŒ¨ë“œ ë‹¤ì‹œ ê·¸ë ¤ì„œ ìˆ«ì ë²„íŠ¼ ì—…ë°ì´íŠ¸
        renderKeypad();

        // 3. ëœë¤ ìˆ˜ì‹ ìƒì„±í•˜ì—¬ íƒ€ê²Ÿ ë„˜ë²„ ê²°ì • (ë¬´ì¡°ê±´ í’€ ìˆ˜ ìˆê²Œ)
        let found = false;
        let attempts = 0;

        while(!found && attempts < 100) {
            try {
                // ëœë¤í•œ ìˆ˜ì‹ì„ ë§Œë“¤ì–´ë´„ (ì˜ˆ: 5 + 5 - 5)
                let tempExpr = generateRandomExpression(baseNumber, requiredCount, currentLevel);
                let result = evaluateExpression(tempExpr);

                // ê²°ê³¼ê°€ 1~20 ì‚¬ì´ì˜ ì •ìˆ˜ì´ë©´ ì±„íƒ
                if (Number.isInteger(result) && result >= 1 && result <= 20) {
                    targetNumber = result;
                    found = true;
                    // console.log("Solution hint:", tempExpr, "=", result); // ë””ë²„ê¹…ìš© ì •ë‹µ
                }
            } catch (e) {}
            attempts++;
        }

        // ë§Œì•½ 100ë²ˆ ì‹œë„í•´ë„ ì‹¤íŒ¨í•˜ë©´ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì • (ì•ˆì „ì¥ì¹˜)
        if (!found) {
            baseNumber = 2; requiredCount = 3; targetNumber = 4; // 2+2=4 (ê°„ë‹¨)
        }

        // í™”ë©´ ê°±ì‹ 
        document.getElementById('baseNum').innerText = baseNumber;
        document.getElementById('reqCount').innerText = requiredCount;
        document.getElementById('targetNum').innerText = targetNumber;
        clearInput();
    }

    // ëœë¤ ìˆ˜ì‹ ë§Œë“¤ê¸° (ë‚´ë¶€ ë¡œì§ìš©)
    function generateRandomExpression(num, count, level) {
        // ë‹¨ìˆœí•˜ê²Œ ìˆ«ì ì‚¬ì´ì— ëœë¤ ì—°ì‚°ìë¥¼ ë¼ì›Œë„£ëŠ” ë°©ì‹
        let ops = ['+', '-', '*'];
        if (level >= 2) ops.push('/'); // ë‚˜ëˆ„ê¸°ëŠ” ì •ìˆ˜ ì•„ë‹ í™•ë¥  ë†’ì•„ì„œ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ
        
        let expr = String(num);
        for(let i=1; i<count; i++) {
            let op = ops[Math.floor(Math.random() * ops.length)];
            expr += op + num;
        }
        return expr; // ê´„í˜¸ë‚˜ ë£¨íŠ¸ ì—†ì´ ë‹¨ìˆœ ì‚¬ì¹™ì—°ì‚°ìœ¼ë¡œë§Œ íƒ€ê²Ÿì„ ë§Œë“¦ (ìµœì†Œí•œì˜ í•´ë‹µ ì¡´ì¬ ë³´ì¥)
    }

    // ì…ë ¥ ê´€ë¦¬
    function addInput(char) {
        // ë£¨íŠ¸ëŠ” ì•ì—, íŒ©í† ë¦¬ì–¼ì€ ë’¤ì— ë“± ë¬¸ë²• ì²´í¬ëŠ” ë‚˜ì¤‘ì— í‰ê°€í•  ë•Œ í•¨
        currentExpression += char;
        updateDisplay();
    }
    function clearInput() {
        currentExpression = "";
        updateDisplay();
    }
    function backspace() {
        currentExpression = currentExpression.slice(0, -1);
        updateDisplay();
    }
    function updateDisplay() {
        // í™”ë©´ì—ëŠ” ê³±í•˜ê¸° ë‚˜ëˆ„ê¸° ë“±ì„ ì˜ˆì˜ê²Œ í‘œì‹œ
        let displayHtml = currentExpression
            .replace(/\*/g, 'Ã—')
            .replace(/\//g, 'Ã·');
        document.getElementById('inputDisplay').innerText = displayHtml;
    }

    // [ì¤‘ìš”] ì •ë‹µ ì²´í¬ ë¡œì§
    function checkAnswer() {
        const modal = document.getElementById('resultModal');
        const title = document.getElementById('modalTitle');
        const msg = document.getElementById('modalMsg');

        // 1. ìˆ«ì ê°œìˆ˜ ì²´í¬
        // ì…ë ¥ëœ ë¬¸ìì—´ì—ì„œ 'baseNumber'ë§Œ ì¶”ì¶œí•´ì„œ ê°œìˆ˜ ì„¸ê¸°
        let count = 0;
        for (let char of currentExpression) {
            if (char === String(baseNumber)) count++;
            // ë‹¤ë¥¸ ìˆ«ìê°€ ìˆìœ¼ë©´ ë°”ë¡œ ì˜¤ë‹µ ì²˜ë¦¬
            else if (/[0-9]/.test(char)) {
                showModal("ì˜¤ë‹µ! ğŸ’¥", `ìˆ«ìëŠ” ${baseNumber}ë§Œ ì“¸ ìˆ˜ ìˆì–´ìš”!`);
                return;
            }
        }

        if (count !== requiredCount) {
            showModal("ì‹¤íŒ¨ ğŸ“‰", `ìˆ«ì ${baseNumber}ë¥¼ ${requiredCount}ë²ˆ ì¨ì•¼ í•´ìš”.<br>(í˜„ì¬ ${count}ë²ˆ ì‚¬ìš©)`);
            return;
        }

        // 2. ìˆ˜ì‹ ê³„ì‚°
        try {
            let result = evaluateExpression(currentExpression);
            
            // ë¶€ë™ì†Œìˆ˜ì  ì˜¤ì°¨ ì²˜ë¦¬ (ì˜ˆ: 1.0000000002 -> 1)
            result = Math.round(result * 100000) / 100000;

            if (result === targetNumber) {
                showModal("ì„±ê³µ! ğŸ‰", `ì—°ê¸ˆìˆ  ëŒ€ì„±ê³µ!<br>${currentExpression.replace(/\*/g,'Ã—')} = ${result}`, true);
            } else {
                showModal("ì‹¤íŒ¨ â˜ï¸", `ê²°ê³¼ê°€ ë‹¤ë¦…ë‹ˆë‹¤.<br>ë§Œë“¤ì–´ì§„ ìˆ«ì: ${result}`);
            }
        } catch (e) {
            showModal("ì˜¤ë¥˜ âš ï¸", "ìˆ˜ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
    }

    // ìˆ˜ì‹ ê³„ì‚°ê¸° (íŒŒì„œ)
    function evaluateExpression(expr) {
        // 1. íŒ©í† ë¦¬ì–¼ ì²˜ë¦¬: 3! -> factorial(3)
        // ì •ê·œì‹ìœ¼ë¡œ ìˆ«ì ë’¤ì— !ê°€ ì˜¤ëŠ” ê²ƒì„ ì°¾ìŒ
        let parsed = expr;
        // ë°˜ë³µì ìœ¼ë¡œ íŒ©í† ë¦¬ì–¼ ì²˜ë¦¬ (3!!) ë“±ì€ ì¼ë‹¨ ë‹¨ìˆœ ì¹˜í™˜ìœ¼ë¡œ ì²˜ë¦¬
        while (parsed.includes('!')) {
            parsed = parsed.replace(/(\d+)!/g, 'factorial($1)');
            // ê´„í˜¸ ë’¤ íŒ©í† ë¦¬ì–¼ (!ê°€ ì—†ì–´ì§ˆ ë•Œê¹Œì§€)
            parsed = parsed.replace(/\)!/g, ')'); // ê´„í˜¸ íŒ©í† ë¦¬ì–¼ì€ ë³µì¡í•´ì„œ ì¼ë‹¨ ë¬´ì‹œí•˜ê±°ë‚˜ ì—ëŸ¬ ì²˜ë¦¬
            if(parsed.includes('!')) break; // ë¬´í•œë£¨í”„ ë°©ì§€ (ë‹¨ìˆœ ìˆ«ì íŒ©í† ë¦¬ì–¼ë§Œ ì§€ì›)
        }

        // 2. ë£¨íŠ¸ ì²˜ë¦¬: âˆš9 -> Math.sqrt(9)
        // ë£¨íŠ¸ ë’¤ì— ìˆ«ìë‚˜ ê´„í˜¸ê°€ ì˜´
        parsed = parsed.replace(/âˆš(\d+)/g, 'Math.sqrt($1)');
        parsed = parsed.replace(/âˆš\(/g, 'Math.sqrt(');

        // 3. ê±°ë“­ì œê³±: ^ -> **
        parsed = parsed.replace(/\^/g, '**');

        // 4. ë³´ì•ˆ ê³„ì‚° (Function ìƒì„±ì ì‚¬ìš©)
        // factorial í•¨ìˆ˜ë¥¼ ì „ì—­ì—ì„œ ì“¸ ìˆ˜ ìˆê²Œ í•´ë‘ 
        return new Function('return ' + parsed)();
    }

    function showModal(titleText, msgText, isSuccess = false) {
        const modal = document.getElementById('resultModal');
        document.getElementById('modalTitle').innerText = titleText;
        document.getElementById('modalMsg').innerHTML = msgText;
        
        const btn = document.querySelector('.modal-btn');
        if(isSuccess) {
            document.getElementById('modalTitle').style.color = '#27ae60';
            btn.innerText = "ë‹¤ìŒ ë¬¸ì œ ğŸ‘‰";
            btn.onclick = nextProblem;
        } else {
            document.getElementById('modalTitle').style.color = '#c0392b';
            btn.innerText = "ë‹¤ì‹œ ë„ì „ ğŸ’ª";
            btn.onclick = closeModal;
        }
        
        modal.style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('resultModal').style.display = 'none';
    }

    function nextProblem() {
        closeModal();
        generateProblem();
    }

    function toggleConcept() {
        const content = document.getElementById('conceptBox');
        if (content.style.maxHeight) content.style.maxHeight = null;
        else content.style.maxHeight = content.scrollHeight + "px";
    }

    // ì‹œì‘
    init();

</script>
</body>
</html>
